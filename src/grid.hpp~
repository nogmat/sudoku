#ifndef DEF_GRID
#define DEF_GRID

#include "entity.hpp"

/*!
 * \file grid.hpp
 * \brief Grid of standard sudoku game
 * \author Matthieu Nogatchewsky
 * \version 1.0
 * \date April 2018
 */

typedef int Board[9][9];

/*!
 * \class Grid
 * \brief Class of a grid
 */
class Grid{

public :

  /*!
   * Constructor
   */
  Grid();

  /*!
   * \fn void initGrid()
   * \brief Initialize the grid
   */
  void initGrid();

  /*!
   * \fn bool load(Board extCells)
   * \brief Load internal board from external board
   * \param extCells External board to load
   */
  bool load(Board extCells);

  /*!
   * \fn void save(Board &extCells)
   * \brief Save internal board into external board
   * \param extCells External Board in which to save
   */
  void save(Board &extCells);

  /*!
   * \fn void initCell()
   * \brief Initialize the position in the grid
   */
  void initCell();

  /*!
   * \fn void nextCell()
   * \brief Increase the position
   */
  void nextCell();

  /*!
   * \fn void prevCell()
   * \brief Decrease the position
   */
  void prevCell();  

  /*!
   * \fn void nextStep(int v)
   * \brief Move a step forward during the process
   * \param v Value to put inside the current cell
   */
  void nextStep(int v);

  /*!
   * \fn void prevStep(int v)
   * \brief Move a step before during the process
   * \param v Value to remove from the current cell
   */
  void prevStep(int v);

  /*!
   * \fn void processing()
   * \brief Recursive helper for the solve method
   */
  void processing();

  /*!
   * \fn void solve()
   * \brief Solve the grid
   */
  void solve();

  /*!
   * \fn int theSquare()
   * \brief Get the square of the current cell
   * \return Number of the current square
   */
  int theSquare();

  /*!
   * \fn int theColumn()
   * \brief Get the column of the current cell
   * \return Number of the current column
   */
  int theColumn();

  /*!
   * \fn int theRow()
   * \brief Get the row of the current cell
   * \return Number of the current row
   */
  int theRow();

private :

  int position; /*!< Position on the grid (from top to bottom and left to right)*/
  enum State {
    PROCESSING,
    SOLVED,
    UNSOLVABLE
  } state ; /*!< State of the grid */
  Board cells; /*!< Internal board of the grid */
  Entity row[9]; /*!< Rows of the grid */
  Entity column[9]; /*!< Columns of the grid */
  Entity square[9]; /*!< Squares of the grid */

};

#endif
